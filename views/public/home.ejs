<%- include('../partials/header') %>

<main>
  <!-- Hero Section -->
  <section class="hero">
    <% if (settings.show_falling_leaves === 'true') { %>
    <!-- Falling leaves animation -->
    <div class="falling-leaves">
      <span class="leaf">üçÇ</span>
      <span class="leaf">üçÅ</span>
      <span class="leaf">üçÇ</span>
      <span class="leaf">üçÅ</span>
      <span class="leaf">üçÇ</span>
      <span class="leaf">üçÅ</span>
      <span class="leaf">üçÇ</span>
      <span class="leaf">üçÅ</span>
    </div>
    <% } %>
    <div class="container">
      <div class="hero-content">
        <div class="hero-text">
          <div class="hero-badge">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
            üçÇ Fall Into a Beautiful Smile
          </div>
          <h1>Your Smile Deserves the <span>Best Care</span></h1>
          <p class="hero-description">Experience modern dentistry with cutting-edge technology and compassionate care at our Buffalo dental office. This season, harvest the confidence of a healthy, radiant smile.</p>
          <div class="hero-buttons">
            <a href="/contact" class="btn btn-primary btn-lg">Book Appointment</a>
            <a href="/services" class="btn btn-secondary btn-lg">Our Services</a>
          </div>
          <div class="hero-stats">
            <div class="stat-item">
              <div class="stat-number">5+</div>
              <div class="stat-label">Years Experience</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">2k+</div>
              <div class="stat-label">Happy Patients</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">5.0</div>
              <div class="stat-label">Star Rating</div>
            </div>
          </div>
        </div>
        <div class="hero-visual">
          <div class="hero-image-wrapper">
            <img src="https://images.pexels.com/photos/3845810/pexels-photo-3845810.jpeg?auto=compress&cs=tinysrgb&w=800" alt="Caring dentist helping a patient with a warm smile" class="hero-image">
            <div class="hero-image-overlay">
              <span class="hero-location">üìç Buffalo, NY</span>
              <span class="hero-tagline">The Service You Expect<br>Results You'll Love</span>
            </div>
          </div>
          <div class="hero-floating-card">
            <div class="floating-card-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            </div>
            <div class="floating-card-text">
              <strong>High-Tech Diagnostics</strong>
              <span>iTero 5D Plus Scanner</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section class="services-section">
    <div class="container">
      <div class="section-header">
        <span class="section-label">What We Offer</span>
        <h2>Comprehensive Dental Services</h2>
        <p>From routine checkups to advanced cosmetic procedures, we provide a full range of dental services tailored to your needs.</p>
      </div>
      
      <div class="services-grid">
        <% services.forEach(function(service) { %>
        <div class="service-card<%= service.image ? ' has-image' : '' %>">
          <% if (service.image) { %>
          <div class="service-image">
            <img src="<%= service.image %>" alt="<%= service.title %>">
          </div>
          <% } else { %>
          <div class="service-icon">
            <% if (service.icon === 'sparkles') { %>
              <!-- Cosmetic/Sparkles -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3l1.5 4.5L18 9l-4.5 1.5L12 15l-1.5-4.5L6 9l4.5-1.5L12 3z"/><path d="M5 19l.5 1.5L7 21l-1.5.5L5 23l-.5-1.5L3 21l1.5-.5L5 19z"/><path d="M19 5l.5 1.5L21 7l-1.5.5L19 9l-.5-1.5L17 7l1.5-.5L19 5z"/></svg>
            <% } else if (service.icon === 'tooth') { %>
              <!-- Tooth/General -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2C9.5 2 7.5 4 7.5 6.5c0 1.5.5 2.8 1.5 3.8L7 22l5-3 5 3-2-11.7c1-1 1.5-2.3 1.5-3.8C16.5 4 14.5 2 12 2z"/></svg>
            <% } else if (service.icon === 'repair') { %>
              <!-- Restorative/Repair -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
            <% } else if (service.icon === 'child') { %>
              <!-- Pediatric/Child -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="5"/><path d="M20 21a8 8 0 10-16 0"/><path d="M12 13v2"/></svg>
            <% } else if (service.icon === 'aligners') { %>
              <!-- Orthodontics/Aligners -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="8" width="18" height="8" rx="2"/><path d="M7 8v8"/><path d="M12 8v8"/><path d="M17 8v8"/></svg>
            <% } else if (service.icon === 'relax') { %>
              <!-- Sedation/Relax -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/><path d="M12 2v2"/></svg>
            <% } else if (service.icon === 'gums') { %>
              <!-- Periodontal/Gums -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 016.5 17H20"/><path d="M4 12.5A2.5 2.5 0 016.5 10H20"/><path d="M4 5.5A2.5 2.5 0 016.5 3H20"/></svg>
            <% } else if (service.icon === 'surgery') { %>
              <!-- Oral Surgery -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12h6"/><path d="M12 9v6"/></svg>
            <% } else if (service.icon === 'crown') { %>
              <!-- Crowns & Bridges -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7z"/><path d="M5 20h14"/></svg>
            <% } else if (service.icon === 'dentures') { %>
              <!-- Dentures -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 12c0-4 4-8 8-8s8 4 8 8"/><path d="M4 12c0 4 4 8 8 8s8-4 8-8"/><path d="M8 12v-2"/><path d="M12 12v-3"/><path d="M16 12v-2"/><path d="M8 12v2"/><path d="M12 12v3"/><path d="M16 12v2"/></svg>
            <% } else { %>
              <!-- Default star -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            <% } %>
          </div>
          <% } %>
          <div class="service-content">
            <h3><%= service.title %></h3>
            <p><%= service.short_description %></p>
            <a href="/services/<%= service.slug %>" class="service-link">
              Learn More
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
            </a>
          </div>
        </div>
        <% }); %>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section class="about-section">
    <div class="container">
      <div class="about-content">
        <div class="about-images">
          <div class="about-image-main">
            <% if (settings.about_image_main) { %>
              <img src="<%= settings.about_image_main %>" alt="About Dentalogix">
            <% } else { %>
              <div class="image-placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
              </div>
            <% } %>
          </div>
          <div class="about-image-secondary">
            <% if (settings.about_image_secondary) { %>
              <img src="<%= settings.about_image_secondary %>" alt="Our Practice">
            <% } else { %>
              <div class="image-placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
              </div>
            <% } %>
          </div>
        </div>
        <div class="about-text">
          <span class="section-label">About Us</span>
          <h2>Dedicated to Your Dental Health Since 2020</h2>
          <p class="lead"><%= settings.about_text %></p>
          <p>We believe everyone deserves access to quality dental care. Our team combines years of expertise with the latest technology to deliver treatments that are effective, comfortable, and tailored to your unique needs.</p>
          
          <div class="about-features">
            <div class="about-feature">
              <div class="feature-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
              </div>
              <div class="feature-text">
                <h4>Modern Technology</h4>
                <p>State-of-the-art equipment for precise diagnostics</p>
              </div>
            </div>
            <div class="about-feature">
              <div class="feature-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg>
              </div>
              <div class="feature-text">
                <h4>Gentle Care</h4>
                <p>Compassionate approach for anxious patients</p>
              </div>
            </div>
            <div class="about-feature">
              <div class="feature-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
              </div>
              <div class="feature-text">
                <h4>Flexible Hours</h4>
                <p>Early morning and weekend appointments</p>
              </div>
            </div>
            <div class="about-feature">
              <div class="feature-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
              </div>
              <div class="feature-text">
                <h4>Expert Team</h4>
                <p>Board-certified specialists in all fields</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Team Section -->
  <% if (team.length > 0) { %>
  <section class="team-section">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Meet Our Team</span>
        <h2>Expert Dentists You Can Trust</h2>
        <p>Our experienced team of dental professionals is committed to providing you with the highest quality care.</p>
      </div>
      
      <div class="team-grid">
        <% team.forEach(function(member) { %>
        <div class="team-card">
          <div class="team-photo">
            <% if (member.photo) { %>
              <img src="<%= member.photo %>" alt="<%= member.name %>">
            <% } else { %>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
            <% } %>
          </div>
          <div class="team-info">
            <h3><%= member.name %></h3>
            <p class="team-title"><%= member.title %></p>
            <p class="team-bio"><%= member.specialties %></p>
          </div>
        </div>
        <% }); %>
      </div>
    </div>
  </section>
  <% } %>

  <!-- Testimonials Section -->
  <% if (testimonials.length > 0) { %>
  <section class="testimonials-section">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Testimonials</span>
        <h2>What Our Patients Say</h2>
        <p>Don't just take our word for it - hear from our satisfied patients about their experience.</p>
      </div>
      
      <div class="testimonials-grid">
        <% testimonials.forEach(function(testimonial) { %>
        <div class="testimonial-card">
          <div class="testimonial-rating">
            <% for(let i = 0; i < testimonial.rating; i++) { %>
              <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            <% } %>
          </div>
          <p class="testimonial-content">"<%= testimonial.content %>"</p>
          <div class="testimonial-author">
            <div class="author-avatar"><%= testimonial.patient_name.charAt(0) %></div>
            <div class="author-info">
              <strong><%= testimonial.patient_name %></strong>
              <span>Patient</span>
            </div>
          </div>
        </div>
        <% }); %>
      </div>
    </div>
  </section>
  <% } %>

  <!-- Blog Section -->
  <% if (recentPosts.length > 0) { %>
  <section class="blog-section">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Latest News</span>
        <h2>From Our Blog</h2>
        <p>Stay informed with the latest dental health tips, news, and updates from our practice.</p>
      </div>
      
      <div class="blog-grid">
        <% recentPosts.forEach(function(post) { %>
        <a href="/blog/<%= post.slug %>" class="blog-card">
          <div class="blog-image">
            <% if (post.featured_image) { %>
              <img src="<%= post.featured_image %>" alt="<%= post.title %>">
            <% } else { %>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
            <% } %>
          </div>
          <div class="blog-content">
            <div class="blog-meta">
              <% if (post.category_name) { %>
              <span class="blog-category"><%= post.category_name %></span>
              <% } %>
              <span class="blog-date"><%= new Date(post.published_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) %></span>
            </div>
            <h3><%= post.title %></h3>
            <p class="blog-excerpt"><%= post.excerpt %></p>
          </div>
        </a>
        <% }); %>
      </div>
    </div>
  </section>
  <% } %>

  <!-- Reviews Section -->
  <% if (reviews && reviews.length > 0) { %>
  <section class="reviews-section">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Patient Reviews</span>
        <h2>What Our Patients Are Saying</h2>
        <% if (reviewStats && reviewStats.total > 0) { %>
        <div class="reviews-summary">
          <div class="reviews-rating-large">
            <span class="rating-number-lg"><%= reviewStats.average_rating ? reviewStats.average_rating.toFixed(1) : '5.0' %></span>
            <div class="rating-stars-lg">
              <% for(let i = 0; i < 5; i++) { %>
                <svg viewBox="0 0 24 24" class="<%= reviewStats.average_rating && i < Math.round(reviewStats.average_rating) ? 'star-filled' : 'star-empty' %>"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
              <% } %>
            </div>
            <span class="rating-count-lg">Based on <%= reviewStats.total %> reviews</span>
          </div>
        </div>
        <% } %>
      </div>

      <div class="reviews-grid">
        <% reviews.forEach(function(review) { %>
        <div class="review-card">
          <div class="review-header">
            <% if (review.reviewer_photo) { %>
              <img src="<%= review.reviewer_photo %>" alt="<%= review.reviewer_name %>" class="reviewer-photo">
            <% } else { %>
              <div class="reviewer-avatar"><%= review.reviewer_name.charAt(0).toUpperCase() %></div>
            <% } %>
            <div class="reviewer-info">
              <strong><%= review.reviewer_name %></strong>
              <div class="review-meta">
                <span class="review-source <%= review.source %>">
                  <% if (review.source === 'google') { %>
                    <svg viewBox="0 0 24 24" fill="currentColor" class="source-icon"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                  <% } else if (review.source === 'yelp') { %>
                    <span style="font-weight: bold; color: #D32323;">Y</span>
                  <% } else if (review.source === 'facebook') { %>
                    <span style="font-weight: bold; color: #1877F2;">f</span>
                  <% } %>
                </span>
                <% if (review.review_date) { %>
                  <span class="review-date"><%= new Date(review.review_date).toLocaleDateString('en-US', { month: 'short', year: 'numeric' }) %></span>
                <% } %>
              </div>
            </div>
          </div>
          <div class="review-rating">
            <% for(let i = 0; i < review.rating; i++) { %>
              <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            <% } %>
          </div>
          <p class="review-content">"<%= review.content %>"</p>
          <% if (review.source_url) { %>
          <a href="<%= review.source_url %>" target="_blank" rel="noopener" class="review-link">View on <%= review.source.charAt(0).toUpperCase() + review.source.slice(1) %></a>
          <% } %>
        </div>
        <% }); %>
      </div>
    </div>
  </section>
  <% } %>

  <!-- Trust & Reviews Section -->
  <section class="trust-section">
    <div class="container">
      <div class="section-header text-center">
        <span class="section-label">Trusted by Thousands</span>
        <h2>Our Reputation Speaks for Itself</h2>
      </div>
      <div class="ratings-grid">
        <div class="rating-card">
          <div class="rating-logo">
            <svg viewBox="0 0 24 24" fill="currentColor" class="google-icon"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
          </div>
          <div class="rating-info">
            <div class="rating-stars">
              <span class="rating-number"><%= reviewStats && reviewStats.average_rating ? reviewStats.average_rating.toFixed(1) : '4.8' %></span>
              <div class="stars">
                <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
              </div>
            </div>
            <span class="rating-count"><%= reviewStats && reviewStats.total ? reviewStats.total.toLocaleString() : '2,394' %> reviews</span>
            <span class="rating-source">Google Reviews</span>
          </div>
        </div>
        <div class="rating-card bbb-card">
          <div class="rating-logo">
            <span class="bbb-badge">BBB</span>
          </div>
          <div class="rating-info">
            <div class="rating-grade">A+</div>
            <span class="rating-count">125 reviews</span>
            <span class="rating-source">BBB Accredited</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Insurance Section -->
  <section class="insurance-section">
    <div class="container">
      <div class="section-header text-center">
        <span class="section-label">Insurance</span>
        <h3>We Accept Most Major Insurance Plans</h3>
      </div>
      <% if (insuranceProviders && insuranceProviders.length > 0) { %>
      <div class="insurance-carousel-wrapper">
        <div class="insurance-carousel <%= insuranceProviders.length > 4 ? 'auto-scroll' : '' %>" id="insuranceCarousel">
          <% insuranceProviders.forEach(function(provider) { %>
          <div class="insurance-logo">
            <% if (provider.logo) { %>
              <% if (provider.website_url) { %>
                <a href="<%= provider.website_url %>" target="_blank" rel="noopener" title="<%= provider.name %>">
                  <img src="<%= provider.logo %>" alt="<%= provider.name %>">
                </a>
              <% } else { %>
                <img src="<%= provider.logo %>" alt="<%= provider.name %>" title="<%= provider.name %>">
              <% } %>
            <% } else { %>
              <% if (provider.website_url) { %>
                <a href="<%= provider.website_url %>" target="_blank" rel="noopener"><span><%= provider.name %></span></a>
              <% } else { %>
                <span><%= provider.name %></span>
              <% } %>
            <% } %>
          </div>
          <% }); %>
          <% if (insuranceProviders.length > 4) { %>
          <!-- Duplicate for seamless loop -->
          <% insuranceProviders.forEach(function(provider) { %>
          <div class="insurance-logo">
            <% if (provider.logo) { %>
              <% if (provider.website_url) { %>
                <a href="<%= provider.website_url %>" target="_blank" rel="noopener" title="<%= provider.name %>">
                  <img src="<%= provider.logo %>" alt="<%= provider.name %>">
                </a>
              <% } else { %>
                <img src="<%= provider.logo %>" alt="<%= provider.name %>" title="<%= provider.name %>">
              <% } %>
            <% } else { %>
              <% if (provider.website_url) { %>
                <a href="<%= provider.website_url %>" target="_blank" rel="noopener"><span><%= provider.name %></span></a>
              <% } else { %>
                <span><%= provider.name %></span>
              <% } %>
            <% } %>
          </div>
          <% }); %>
          <% } %>
        </div>
      </div>
      <% } else { %>
      <div class="insurance-grid">
        <div class="insurance-logo"><span>United Healthcare</span></div>
        <div class="insurance-logo"><span>Delta Dental</span></div>
        <div class="insurance-logo"><span>Guardian</span></div>
        <div class="insurance-logo"><span>Anthem</span></div>
        <div class="insurance-logo"><span>Principal</span></div>
      </div>
      <% } %>
      <p class="insurance-note text-center">Don't see your insurance? <a href="/contact">Contact us</a> - we work with most providers!</p>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="container">
      <h2>Ready for a Healthier Smile?</h2>
      <p>Schedule your appointment today and take the first step toward optimal dental health.</p>
      <div class="cta-buttons">
        <a href="/contact" class="btn btn-primary btn-lg">Book Appointment</a>
        <a href="tel:<%= settings.phone %>" class="btn btn-outline btn-lg">Call <%= settings.phone %></a>
      </div>
    </div>
  </section>
</main>

<%- include('../partials/footer') %>

<%- include('../partials/header') %>

<!-- BlogPosting Schema.org JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "<%= post.title %>",
  "description": "<%= post.excerpt || post.title %>",
  "image": "<%= post.featured_image || '' %>",
  "datePublished": "<%= post.published_at %>",
  "dateModified": "<%= post.updated_at || post.published_at %>",
  "author": {
    "@type": "Person",
    "name": "<%= post.author_name || settings.site_name || 'Dentalogix' %>"
  },
  "publisher": {
    "@type": "Organization",
    "name": "<%= settings.site_name || 'Dentalogix' %>",
    "logo": {
      "@type": "ImageObject",
      "url": "<%= settings.site_logo || '' %>"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "<%= settings.site_url || 'https://dentalogix.us' %>/blog/<%= post.slug %>"
  }
}
</script>

<main class="single-post">
  <div class="container">
    <div class="post-header">
      <div class="blog-meta" style="justify-content: center; margin-bottom: 1rem;">
        <% if (post.category_name) { %>
        <a href="/blog/category/<%= post.category_slug %>" class="blog-category"><%= post.category_name %></a>
        <% } %>
        <span class="blog-date"><%= new Date(post.published_at).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %></span>
      </div>
      <h1><%= post.title %></h1>
      <div class="post-meta">
        <% if (post.author_name) { %>
        <span>By <%= post.author_name %></span>
        <% } %>
      </div>
    </div>
    
    <% if (post.featured_image) { %>
    <div class="post-featured-image">
      <img src="<%= post.featured_image %>" alt="<%= post.title %>" style="width: 100%; border-radius: 1rem;">
    </div>
    <% } %>
    
    <div class="blog-layout">
      <article class="post-content">
        <%- post.htmlContent %>
      </article>
      
      <aside class="blog-sidebar">
        <div class="sidebar-widget">
          <h4>Categories</h4>
          <ul class="category-list">
            <% categories.forEach(function(cat) { %>
            <li><a href="/blog/category/<%= cat.slug %>"><%= cat.name %></a></li>
            <% }); %>
          </ul>
        </div>
        
        <% if (recentPosts.length > 0) { %>
        <div class="sidebar-widget">
          <h4>Recent Posts</h4>
          <ul style="list-style: none; padding: 0; margin: 0;">
            <% recentPosts.forEach(function(p) { %>
              <% if (p.id !== post.id) { %>
              <li style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--color-gray-200);">
                <a href="/blog/<%= p.slug %>" style="font-weight: 500; color: var(--color-gray-700);"><%= p.title %></a>
                <p style="font-size: 0.8rem; color: var(--color-gray-400); margin: 0.25rem 0 0;"><%= new Date(p.published_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) %></p>
              </li>
              <% } %>
            <% }); %>
          </ul>
        </div>
        <% } %>
        
        <div class="sidebar-widget">
          <h4>Schedule a Visit</h4>
          <p style="color: var(--color-gray-500); margin-bottom: 1rem;">Have questions? Book an appointment with our dental experts.</p>
          <a href="/contact" class="btn btn-primary btn-sm" style="width: 100%;">Book Appointment</a>
        </div>
      </aside>
    </div>
    
    <div style="max-width: 700px; margin: 3rem auto 0; padding-top: 2rem; border-top: 1px solid var(--color-gray-200); text-align: center;">
      <a href="/blog" class="btn btn-secondary">‚Üê Back to Blog</a>
    </div>
  </div>
</main>

<%- include('../partials/footer') %>

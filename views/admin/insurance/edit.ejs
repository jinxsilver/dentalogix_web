<%- include('../partials/header') %>

<div class="card">
  <div class="card-header">
    <h2><%= provider ? 'Edit Insurance Provider' : 'Add Insurance Provider' %></h2>
    <a href="/admin/insurance" class="btn btn-secondary">‚Üê Back to Providers</a>
  </div>

  <div class="card-body">
    <form action="<%= provider ? '/admin/insurance/' + provider.id : '/admin/insurance' %>" method="POST" enctype="multipart/form-data">
      <div class="form-row">
        <div class="form-group">
          <label for="name">Provider Name *</label>
          <input type="text" id="name" name="name" required value="<%= provider ? provider.name : '' %>" placeholder="e.g., Delta Dental">
        </div>

        <div class="form-group">
          <label for="display_order">Display Order</label>
          <input type="number" id="display_order" name="display_order" value="<%= provider ? provider.display_order : 0 %>" min="0" placeholder="0">
          <small style="color: var(--text-muted);">Lower numbers appear first</small>
        </div>
      </div>

      <div class="form-group">
        <label for="website_url">Website URL (optional)</label>
        <input type="url" id="website_url" name="website_url" value="<%= provider ? provider.website_url || '' : '' %>" placeholder="https://www.deltadental.com">
      </div>

      <div class="form-group">
        <label for="status">Status</label>
        <select id="status" name="status">
          <option value="published" <%= (!provider || provider.status === 'published') ? 'selected' : '' %>>Published</option>
          <option value="draft" <%= provider && provider.status === 'draft' ? 'selected' : '' %>>Draft</option>
        </select>
      </div>

      <div class="form-group">
        <label for="logo">Logo</label>
        <% if (provider && provider.logo) { %>
          <div class="file-preview" style="margin-bottom: 1rem; padding: 1rem; background: #F8FAFC; border-radius: 0.5rem;">
            <p style="font-size: 0.875rem; color: #64748B; margin-bottom: 0.5rem;">Current logo:</p>
            <img src="<%= provider.logo %>" alt="<%= provider.name %>" style="max-width: 150px; max-height: 60px; object-fit: contain;">
          </div>
        <% } %>
        <input type="file" id="logo" name="logo" accept="image/*">
        <small style="color: var(--text-muted);">Recommended: PNG with transparent background, ~200x80px</small>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary"><%= provider ? 'Update Provider' : 'Add Provider' %></button>
        <a href="/admin/insurance" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>

<%- include('../partials/footer') %>

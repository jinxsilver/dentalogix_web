<%- include('../partials/header') %>

<div class="card">
  <div class="card-header">
    <h2><%= editUser ? 'Edit User' : 'Add New User' %></h2>
    <a href="/admin/users" class="btn btn-secondary">← Back to Users</a>
  </div>
  
  <div class="card-body">
    <% if (typeof error !== 'undefined' && error) { %>
    <div class="alert alert-error">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
      <%= error %>
    </div>
    <% } %>
    
    <form action="<%= editUser ? '/admin/users/' + editUser.id : '/admin/users' %>" method="POST">
      <div class="form-row">
        <div class="form-group">
          <label for="username">Username *</label>
          <input type="text" id="username" name="username" required value="<%= editUser ? editUser.username : '' %>" placeholder="johndoe">
        </div>
        
        <div class="form-group">
          <label for="email">Email *</label>
          <input type="email" id="email" name="email" required value="<%= editUser ? editUser.email : '' %>" placeholder="john@example.com">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="password"><%= editUser ? 'New Password (leave blank to keep current)' : 'Password *' %></label>
          <input type="password" id="password" name="password" <%= editUser ? '' : 'required' %> placeholder="<%= editUser ? '••••••••' : 'Enter password' %>">
        </div>
        
        <div class="form-group">
          <label for="role">Role</label>
          <select id="role" name="role">
            <option value="editor" <%= editUser && editUser.role === 'editor' ? 'selected' : '' %>>Editor</option>
            <option value="admin" <%= editUser && editUser.role === 'admin' ? 'selected' : '' %>>Admin</option>
          </select>
        </div>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn btn-primary"><%= editUser ? 'Update User' : 'Create User' %></button>
        <a href="/admin/users" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>

<%- include('../partials/footer') %>

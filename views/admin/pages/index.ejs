<%- include('../partials/header') %>

<div style="display: flex; justify-content: flex-end; margin-bottom: 1.5rem;">
  <a href="/admin/pages/new" class="btn btn-primary">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px;"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
    Add New Page
  </a>
</div>

<!-- Page Cards Grid -->
<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 1.25rem;">

  <!-- Home Page Card (Special) -->
  <div class="card" style="background: linear-gradient(135deg, #EFF6FF 0%, #F0F9FF 100%); border: 1px solid #BFDBFE;">
    <div class="card-body" style="padding: 1.25rem;">
      <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem;">
        <div style="width: 48px; height: 48px; background: #3B82F6; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
          <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" style="width: 24px; height: 24px;"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        </div>
        <div style="flex: 1;">
          <h3 style="margin: 0 0 0.25rem 0; font-size: 1.125rem; color: #1E40AF;">Home Page</h3>
          <p style="margin: 0; font-size: 0.875rem; color: #3B82F6;">Main landing page with hero, services, testimonials, and more</p>
        </div>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <a href="/" target="_blank" class="btn btn-secondary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          View
        </a>
        <a href="/admin/pages/home" class="btn btn-primary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
          Edit
        </a>
      </div>
    </div>
  </div>

  <!-- About Page Card -->
  <% const aboutPage = pages.find(p => p.slug === 'about'); %>
  <% if (aboutPage) { %>
  <div class="card" style="background: linear-gradient(135deg, #F0FDF4 0%, #ECFDF5 100%); border: 1px solid #BBF7D0;">
    <div class="card-body" style="padding: 1.25rem;">
      <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem;">
        <div style="width: 48px; height: 48px; background: #22C55E; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
          <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" style="width: 24px; height: 24px;"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
        </div>
        <div style="flex: 1;">
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <h3 style="margin: 0; font-size: 1.125rem; color: #166534;">About Us</h3>
            <span class="badge badge-<%= aboutPage.status === 'published' ? 'success' : 'warning' %>" style="font-size: 0.7rem;"><%= aboutPage.status %></span>
          </div>
          <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #16A34A;">Practice story, mission, and team members</p>
        </div>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <a href="/about" target="_blank" class="btn btn-secondary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          View
        </a>
        <a href="/admin/pages/<%= aboutPage.id %>/edit" class="btn btn-primary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
          Edit
        </a>
      </div>
    </div>
  </div>
  <% } %>

  <!-- Services Page Card -->
  <% const servicesPage = pages.find(p => p.slug === 'services'); %>
  <% if (servicesPage) { %>
  <div class="card" style="background: linear-gradient(135deg, #FEF3C7 0%, #FEF9C3 100%); border: 1px solid #FDE68A;">
    <div class="card-body" style="padding: 1.25rem;">
      <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem;">
        <div style="width: 48px; height: 48px; background: #F59E0B; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
          <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" style="width: 24px; height: 24px;"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
        </div>
        <div style="flex: 1;">
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <h3 style="margin: 0; font-size: 1.125rem; color: #92400E;">Services</h3>
            <span class="badge badge-<%= servicesPage.status === 'published' ? 'success' : 'warning' %>" style="font-size: 0.7rem;"><%= servicesPage.status %></span>
          </div>
          <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #D97706;">Dental services and treatments offered</p>
        </div>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <a href="/services" target="_blank" class="btn btn-secondary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          View
        </a>
        <a href="/admin/services" class="btn btn-primary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
          Manage
        </a>
      </div>
    </div>
  </div>
  <% } %>

  <!-- Blog Page Card -->
  <% const blogPage = pages.find(p => p.slug === 'blog'); %>
  <% if (blogPage) { %>
  <div class="card" style="background: linear-gradient(135deg, #FDF2F8 0%, #FCE7F3 100%); border: 1px solid #FBCFE8;">
    <div class="card-body" style="padding: 1.25rem;">
      <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem;">
        <div style="width: 48px; height: 48px; background: #EC4899; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
          <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" style="width: 24px; height: 24px;"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
        </div>
        <div style="flex: 1;">
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <h3 style="margin: 0; font-size: 1.125rem; color: #9D174D;">Blog</h3>
            <span class="badge badge-<%= blogPage.status === 'published' ? 'success' : 'warning' %>" style="font-size: 0.7rem;"><%= blogPage.status %></span>
          </div>
          <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #DB2777;">News, articles, and dental tips</p>
        </div>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <a href="/blog" target="_blank" class="btn btn-secondary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          View
        </a>
        <a href="/admin/posts" class="btn btn-primary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
          Manage
        </a>
      </div>
    </div>
  </div>
  <% } %>

  <!-- Contact Page Card -->
  <% const contactPage = pages.find(p => p.slug === 'contact'); %>
  <% if (contactPage) { %>
  <div class="card" style="background: linear-gradient(135deg, #F5F3FF 0%, #EDE9FE 100%); border: 1px solid #DDD6FE;">
    <div class="card-body" style="padding: 1.25rem;">
      <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem;">
        <div style="width: 48px; height: 48px; background: #8B5CF6; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
          <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" style="width: 24px; height: 24px;"><path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"/></svg>
        </div>
        <div style="flex: 1;">
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <h3 style="margin: 0; font-size: 1.125rem; color: #5B21B6;">Contact</h3>
            <span class="badge badge-<%= contactPage.status === 'published' ? 'success' : 'warning' %>" style="font-size: 0.7rem;"><%= contactPage.status %></span>
          </div>
          <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #7C3AED;">Contact form and location information</p>
        </div>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <a href="/contact" target="_blank" class="btn btn-secondary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          View
        </a>
        <a href="/admin/pages/<%= contactPage.id %>/edit" class="btn btn-primary btn-sm" style="flex: 1; justify-content: center;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
          Edit
        </a>
      </div>
    </div>
  </div>
  <% } %>

</div>

<!-- Other Custom Pages -->
<% const customPages = pages.filter(p => !['home', 'about', 'services', 'blog', 'contact'].includes(p.slug)); %>
<% if (customPages.length > 0) { %>
<div class="card" style="margin-top: 1.5rem;">
  <div class="card-header">
    <h2>Custom Pages</h2>
  </div>

  <div class="table-responsive">
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Slug</th>
          <th>Template</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% customPages.forEach(function(page) { %>
        <tr>
          <td><strong><%= page.title %></strong></td>
          <td><code>/<%= page.slug %></code></td>
          <td><%= page.template %></td>
          <td>
            <span class="badge badge-<%= page.status === 'published' ? 'success' : 'warning' %>"><%= page.status %></span>
          </td>
          <td>
            <div class="actions">
              <a href="/<%= page.slug %>" target="_blank" class="btn btn-secondary btn-sm btn-icon" title="View">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
              </a>
              <a href="/admin/pages/<%= page.id %>/edit" class="btn btn-secondary btn-sm btn-icon" title="Edit">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
              </a>
              <form action="/admin/pages/<%= page.id %>/delete" method="POST" class="delete-form" style="display: inline;">
                <button type="submit" class="btn btn-danger btn-sm btn-icon" title="Delete">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
                </button>
              </form>
            </div>
          </td>
        </tr>
        <% }); %>
      </tbody>
    </table>
  </div>
</div>
<% } %>

<%- include('../partials/footer') %>

<%- include('../partials/header') %>

<% if (typeof success !== 'undefined' && success) { %>
<div class="alert alert-success">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
  Home page settings saved successfully!
</div>
<% } %>

<div style="margin-bottom: 1.5rem;">
  <a href="/admin/pages" class="btn btn-secondary">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px;"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
    Back to Pages
  </a>
</div>

<form action="/admin/pages/home" method="POST" enctype="multipart/form-data">
  <!-- Problem Section Images - Full Width -->
  <div class="card" style="margin-bottom: 1.5rem;">
    <div class="card-header">
      <h2>Problem Section Images</h2>
    </div>
    <div class="card-body">
      <p style="color: #64748B; font-size: 0.875rem; margin-bottom: 1.5rem;">These images appear in the "The Problem" section on the homepage. Upload custom illustrations to match your brand.</p>

      <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
        <!-- Villain Image -->
        <div class="form-group">
          <label for="problem_villain_image">Villain Card</label>
          <div style="margin-bottom: 0.5rem; padding: 0.75rem; background: #FEF3C7; border-radius: 0.5rem; text-align: center; min-height: 100px; display: flex; align-items: center; justify-content: center;">
            <% if (settings.problem_villain_image) { %>
              <img src="<%= settings.problem_villain_image %>" alt="Villain" style="max-height: 80px; max-width: 100%; object-fit: contain; border-radius: 0.375rem;">
            <% } else { %>
              <span style="color: #92400E; font-size: 0.75rem;">No image</span>
            <% } %>
          </div>
          <input type="file" id="problem_villain_image" name="problem_villain_image" accept="image/png,image/jpeg,image/webp,image/gif" style="width: 100%; padding: 0.4rem; border: 1px solid #E2E8F0; border-radius: 0.5rem; font-size: 0.8rem;">
          <small style="color: #64748B; display: block; margin-top: 0.25rem; font-size: 0.75rem;">Main card (anxious person)</small>
        </div>

        <!-- External Problem Image -->
        <div class="form-group">
          <label for="problem_external_image">External Problem</label>
          <div style="margin-bottom: 0.5rem; padding: 0.75rem; background: #FFF8F0; border-radius: 0.5rem; text-align: center; min-height: 100px; display: flex; align-items: center; justify-content: center;">
            <% if (settings.problem_external_image) { %>
              <img src="<%= settings.problem_external_image %>" alt="External Problem" style="max-height: 80px; max-width: 100%; object-fit: contain; border-radius: 0.375rem;">
            <% } else { %>
              <span style="color: #9A7B4F; font-size: 0.75rem;">No image</span>
            <% } %>
          </div>
          <input type="file" id="problem_external_image" name="problem_external_image" accept="image/png,image/jpeg,image/webp,image/gif" style="width: 100%; padding: 0.4rem; border: 1px solid #E2E8F0; border-radius: 0.5rem; font-size: 0.8rem;">
          <small style="color: #64748B; display: block; margin-top: 0.25rem; font-size: 0.75rem;">Family/group icon</small>
        </div>

        <!-- Internal Problem Image -->
        <div class="form-group">
          <label for="problem_internal_image">How It Feels</label>
          <div style="margin-bottom: 0.5rem; padding: 0.75rem; background: #FFF8F0; border-radius: 0.5rem; text-align: center; min-height: 100px; display: flex; align-items: center; justify-content: center;">
            <% if (settings.problem_internal_image) { %>
              <img src="<%= settings.problem_internal_image %>" alt="Internal Problem" style="max-height: 80px; max-width: 100%; object-fit: contain; border-radius: 0.375rem;">
            <% } else { %>
              <span style="color: #9A7B4F; font-size: 0.75rem;">No image</span>
            <% } %>
          </div>
          <input type="file" id="problem_internal_image" name="problem_internal_image" accept="image/png,image/jpeg,image/webp,image/gif" style="width: 100%; padding: 0.4rem; border: 1px solid #E2E8F0; border-radius: 0.5rem; font-size: 0.8rem;">
          <small style="color: #64748B; display: block; margin-top: 0.25rem; font-size: 0.75rem;">Worried face emoji</small>
        </div>

        <!-- Philosophical Problem Image -->
        <div class="form-group">
          <label for="problem_philosophical_image">Why It's Wrong</label>
          <div style="margin-bottom: 0.5rem; padding: 0.75rem; background: #FEF3C7; border-radius: 0.5rem; text-align: center; min-height: 100px; display: flex; align-items: center; justify-content: center;">
            <% if (settings.problem_philosophical_image) { %>
              <img src="<%= settings.problem_philosophical_image %>" alt="Philosophical Problem" style="max-height: 80px; max-width: 100%; object-fit: contain; border-radius: 0.375rem;">
            <% } else { %>
              <span style="color: #92400E; font-size: 0.75rem;">No image</span>
            <% } %>
          </div>
          <input type="file" id="problem_philosophical_image" name="problem_philosophical_image" accept="image/png,image/jpeg,image/webp,image/gif" style="width: 100%; padding: 0.4rem; border: 1px solid #E2E8F0; border-radius: 0.5rem; font-size: 0.8rem;">
          <small style="color: #64748B; display: block; margin-top: 0.25rem; font-size: 0.75rem;">Hand/care icon</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Stakes Section Image - Full Width -->
  <div class="card" style="margin-bottom: 1.5rem;">
    <div class="card-header">
      <h2>Stakes Section Image</h2>
    </div>
    <div class="card-body">
      <p style="color: #64748B; font-size: 0.875rem; margin-bottom: 1.5rem;">Upload a custom image for the Stakes section. This image displays full-width between the Plan and Services sections. If no image is uploaded, the section will be hidden.</p>

      <div class="form-group">
        <label for="stakes_section_image">Section Image</label>
        <% if (settings.stakes_section_image) { %>
          <div style="margin-bottom: 1rem; padding: 1rem; background: #F8FAFC; border-radius: 0.5rem;">
            <p style="font-size: 0.875rem; color: #64748B; margin-bottom: 0.5rem;">Current image:</p>
            <img src="<%= settings.stakes_section_image %>" alt="Stakes Section" style="max-width: 100%; max-height: 200px; object-fit: contain; border-radius: 0.375rem;">
          </div>
        <% } else { %>
          <div style="margin-bottom: 1rem; padding: 2rem; background: #F8FAFC; border-radius: 0.5rem; text-align: center; border: 2px dashed #E2E8F0;">
            <span style="color: #94A3B8; font-size: 0.875rem;">No image uploaded - section will be hidden</span>
          </div>
        <% } %>
        <input type="file" id="stakes_section_image" name="stakes_section_image" accept="image/png,image/jpeg,image/webp,image/gif" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 0.5rem;">
        <small style="color: #64748B; display: block; margin-top: 0.5rem;">This image displays full-width on the homepage. Use a wide banner-style image for best results.</small>
      </div>
    </div>
  </div>

  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">

    <!-- Guide Section Images (renamed from About) -->
    <div class="card">
      <div class="card-header">
        <h2>Guide Section Images</h2>
      </div>
      <div class="card-body">
        <p style="color: #64748B; font-size: 0.875rem; margin-bottom: 1.5rem;">These images appear in the "Guide" section on the homepage, showing your practice as the trusted guide.</p>

        <div class="form-group">
          <label for="about_image_main">Main Image (Large)</label>
          <% if (settings.about_image_main) { %>
            <div style="margin-bottom: 1rem; padding: 1rem; background: #F8FAFC; border-radius: 0.5rem;">
              <p style="font-size: 0.875rem; color: #64748B; margin-bottom: 0.5rem;">Current image:</p>
              <img src="<%= settings.about_image_main %>" alt="About main" style="max-height: 120px; max-width: 100%; object-fit: cover; border-radius: 0.5rem;">
            </div>
          <% } %>
          <input type="file" id="about_image_main" name="about_image_main" accept="image/*" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 0.5rem;">
          <small style="color: #64748B; display: block; margin-top: 0.5rem;">Recommended: 600x400px or similar. This is the larger image.</small>
        </div>

        <div class="form-group" style="margin-top: 1.5rem;">
          <label for="about_image_secondary">Secondary Image (Small)</label>
          <% if (settings.about_image_secondary) { %>
            <div style="margin-bottom: 1rem; padding: 1rem; background: #F8FAFC; border-radius: 0.5rem;">
              <p style="font-size: 0.875rem; color: #64748B; margin-bottom: 0.5rem;">Current image:</p>
              <img src="<%= settings.about_image_secondary %>" alt="About secondary" style="max-height: 100px; max-width: 100%; object-fit: cover; border-radius: 0.5rem;">
            </div>
          <% } %>
          <input type="file" id="about_image_secondary" name="about_image_secondary" accept="image/*" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 0.5rem;">
          <small style="color: #64748B; display: block; margin-top: 0.5rem;">Recommended: 300x200px or similar. This is the smaller overlapping image.</small>
        </div>
      </div>
    </div>

    <!-- Quick Links -->
    <div class="card">
      <div class="card-header">
        <h2>Home Page Quick Links</h2>
      </div>
      <div class="card-body">
        <p style="color: #64748B; font-size: 0.875rem; margin-bottom: 1.5rem;">Manage other home page sections:</p>

        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
          <a href="/admin/services" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px; margin-right: 0.5rem;"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
            Manage Featured Services
          </a>

          <a href="/admin/testimonials" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px; margin-right: 0.5rem;"><path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"/></svg>
            Manage Testimonials
          </a>

          <a href="/admin/reviews" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px; margin-right: 0.5rem;"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            Manage Reviews
          </a>

          <a href="/admin/team" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px; margin-right: 0.5rem;"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
            Manage Team Members
          </a>

          <a href="/admin/insurance" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px; margin-right: 0.5rem;"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
            Manage Insurance Providers
          </a>

          <a href="/admin/posts" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px; margin-right: 0.5rem;"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
            Manage Blog Posts (Recent Posts)
          </a>
        </div>

        <div style="margin-top: 1.5rem; padding: 1rem; background: #EFF6FF; border-radius: 0.5rem;">
          <p style="font-size: 0.875rem; color: #1E40AF; margin: 0;">
            <strong>Tip:</strong> Hero section text and site name can be edited in <a href="/admin/settings" style="color: #1E40AF; text-decoration: underline;">Settings</a>.
          </p>
        </div>
      </div>
    </div>

  </div>

  <div style="margin-top: 1.5rem;">
    <button type="submit" class="btn btn-primary btn-lg">Save Home Page Settings</button>
  </div>
</form>

<%- include('../partials/footer') %>
